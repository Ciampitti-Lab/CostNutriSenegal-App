---
title: "CosNutri Senegal App"
output: 
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: fill
    css: css/styles.css
    logo: www/Logo.png
runtime: shiny
---

```{r setup, include=FALSE}
# Libraries ----

# 1. App -----
library(shiny)
library(flexdashboard)
library(shinydashboard)
library(shinythemes)
library(shinyWidgets)

# 2. Data Usage -----
library(tidyverse)

# 3. Design Help -----
library(tippy)

```


Visualization
============================

Column {.sidebar data-width=350}
----------------------------
```{r}
# Select for Districts -----
shinyWidgets::pickerInput(inputId = "districtSelection",
                          label = h4("Select a District: "),
                          choices = c("Diourbel", "Fatick", "Kaffrine", "Kaolack", "Kolda", "Thies"),
                          multiple = FALSE
        )

# Radio for baseline or alternative -----
shiny::radioButtons(inputId = "baselineOrAlternative",
                    label = tippy("Select the management: (Hover me!)",
                                  tooltip = paste("<p>The baseline management is compound of: <p>",
                                                  "<p>Planting date = 1<p>",
                                                  "<p>Planting density = 1.1<p>",
                                                  "<p>Nitrogen fertilzer amount = 30<p>",
                                                  "<p>Nitrogen fertilzer cost = 29.7<p>",
                                                  sep =""),
                                  placement = "top-start",
                                  arrow = TRUE,
                                  animation = "scale",
                                  theme = "light"),
                    choices = c("Baseline"  = "baseline",
                                "Alternative managements" = "alternativeManagements")
                    )

# Appears when selected alternative managements ------

conditionalPanel(
  condition = "input.baselineOrAlternative == 'alternativeManagements'",
  hr(),
  shinyWidgets::pickerInput(inputId = "plantingDate",
                          label = h4("Select a planting date: "),
                          choices = c(1, 2, 3),
                          multiple = FALSE
        ),
  shinyWidgets::pickerInput(inputId = "plantingDensity",
                          label = h4("Select a planting density: "),
                          choices = c(1.1, 3.3, 6.6),
                          multiple = FALSE
        ),
  shinyWidgets::pickerInput(inputId = "seedCost",
                          label = h4("Select a seed cost: "),
                          choices = c(1.4839, 4.4517, 8.9034),
                          multiple = FALSE
        ),
  sliderInput(inputId = "nAmount",
              label = h4("Amount of nitrogen fertilizer: "),
              min = 0,
              max = 100,
              value = 60,
              step = 20,
              sep = ""),
  sliderInput(inputId = "nCost",
              label = h4("Nitrogen fertilizer cost: "),
              min = 0,
              max = 99,
              value = 59.4,
              step = 19.8,
              sep = "")
)

# Select Alternative Scenarios ----
hr()

shinyWidgets::pickerInput(inputId = "scenarioSelection",
                          label = h4("Select an alternative scenario: "),
                          choices = c(1, 2, 3, 4, 5),
                          multiple = FALSE
        )
```

Column {data-width=600}
----------------------------

### Scenarios chart {data-height=550}
```{r}

```

###
<!-- # ```{r} -->
<!-- # fluidRow( -->
<!-- #     column( -->
<!-- #       id="map", -->
<!-- #       width = 7, -->
<!-- #       style = "height: 500px", -->
<!-- #       "District selected" -->
<!-- #     ), -->
<!-- #     column( -->
<!-- #         width = 5, -->
<!-- #         div( -->
<!-- #           class = "container", -->
<!-- #           id="price", -->
<!-- #           style = "color: black; height: 150px", -->
<!-- #           "Total production cost" -->
<!-- #         ), -->
<!-- #         div( -->
<!-- #           class = "container", -->
<!-- #           id="ratio", -->
<!-- #           style = "height: 175px", -->
<!-- #           flexdashboard::renderGauge({ -->
<!-- #    -->
<!-- #             flexdashboard::gauge(0.4, -->
<!-- #                                  min = 0, -->
<!-- #                                  max = 0.6, -->
<!-- #                                  symbol = '', -->
<!-- #                                  label = "Price Ratio", -->
<!-- #                                   gaugeSectors( success = c(0,0.1), -->
<!-- #                                                 warning = c(0.101,0.15), -->
<!-- #                                                 danger = c(0.151, 0.3), -->
<!-- #                                                 colors = c("#2a9d8f", "#fcbf49", "#ce4257")) -->
<!-- #                                   ) -->
<!-- #              -->
<!-- #           }) -->
<!-- #         ) -->
<!-- #     ) -->
<!-- # ) -->
<!-- # ``` -->
<div class = "row">
<div class = "col-md-7">
<center>
```{r}
div(
  id="map",
  width = 7,
  style = "height: 340px",
  "District selected"
)
```
</center>
</div>

<div class = "col-md-5">
<center>
```{r value, fig.width=2, fig.height=2}
p("Value Box")
```    
</center>
<center>
```{r gauge, fig.width=2, fig.height=2}
gauge(round(100*(1.0*20)/50,2),0,100, symbol = '%', label= "Full Cabin Match: Tile 1", gaugeSectors(
  success = c(80, 100), warning = c(40, 79), danger = c(0, 39)))
```    
</center>
</div>
</div>


Column {data-width=350}
----------------------------

### Net cash income 
```{r}

```

### Kcal per person per day
```{r}

```

### Protein per person per day
```{r}

```

### Fat per person per day
```{r}

```

### Calcium per person per day
```{r}

```

### Iron per person per day
```{r}

```